<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ATECSkills Formandos</title>

    <script type="module" src="/src/studentsPage.js"></script>
</head>
<body>
    <div id="content">
        <div class="title"><h1>Lista Formandos</h1></div>
        <div class="table-container">
            <table>
                <tr>
                    <th scope="col">Foto</th>
                    <th scope="col">Nome</th>
                    <th scope="col">NÂº Aluno</th>
                    <th scope="col">Turma</th>
                    <th scope="col">Email</th>
                    <th scope="col">Data de Nascimento</th>
                    <th></th>
                </tr>
                <!-- Dynamic content will be inserted here -->
            </table>
        </div>
    </div>
    
    <script>
      async function getAllStudents() {
    const response = await fetch('http://127.0.0.1:8000/api/students/');
    const data = await response.json();
    return data;
}

        // JavaScript code to fetch data and populate the table goes here
        async function populateTable() {
            const students = await getAllStudents(); // Assuming you have a function to fetch students

            const tableBody = document.querySelector('table');

            students.forEach((student) => {
                const newRow = document.createElement('tr');
                newRow.classList.add('table-row');

                newRow.innerHTML = `
                    <td>
                        <div>
                            <img src="${student.image}" alt="${student.name}">
                        </div>
                    </td>
                    <td>${student.name}</td>
                    <td>${student.student_number}</td>
                    <td>${student.classroom.edition}</td>
                    <td>${student.email}</td>
                    <td>${student.birth_date}</td>
                    <td>
                        <i class="fa-solid fa-magnifying-glass detailsBtn"></i>
                        <i class="fa-solid fa-pencil editBtn"></i>
                        <i class="fa-regular fa-trash-can removeBtn"></i>
                    </td>
                `;

                tableBody.appendChild(newRow);
            });
        }

        // Call the populateTable function to load data
        populateTable();
    </script>
</body>
</html>
